<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 19 Exercise 3: Comparison and complexity | Computational Text Analysis</title>
<meta name="author" content="Christopher Barrie">
<meta name="description" content="19.1 Introduction The hands-on exercise for this week focuses on: 1) comparing texts; 2) measuring he document-level characteristics of text‚Äîhere, complexity. In this tutorial, you will learn how...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 19 Exercise 3: Comparison and complexity | Computational Text Analysis">
<meta property="og:type" content="book">
<meta property="og:url" content="https://cjbarrie.github.io/CTA-ED/exercise-3-comparison-and-complexity.html">
<meta property="og:image" content="https://cjbarrie.github.io/CTA-ED/coverb.png">
<meta property="og:description" content="19.1 Introduction The hands-on exercise for this week focuses on: 1) comparing texts; 2) measuring he document-level characteristics of text‚Äîhere, complexity. In this tutorial, you will learn how...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 19 Exercise 3: Comparison and complexity | Computational Text Analysis">
<meta name="twitter:description" content="19.1 Introduction The hands-on exercise for this week focuses on: 1) comparing texts; 2) measuring he document-level characteristics of text‚Äîhere, complexity. In this tutorial, you will learn how...">
<meta name="twitter:image" content="https://cjbarrie.github.io/CTA-ED/coverb.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Computational Text Analysis</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">‚ÄúComputational Text Analysis‚Äù (PGSP11584)</a></li>
<li><a class="" href="course-overview.html">Course Overview</a></li>
<li><a class="" href="introduction-to-r.html">Introduction to R</a></li>
<li><a class="" href="week-1.html"><span class="header-section-number">1</span> Week 1</a></li>
<li><a class="" href="week-2.html"><span class="header-section-number">2</span> Week 2</a></li>
<li><a class="" href="week-2-demo.html"><span class="header-section-number">3</span> Week 2 Demo</a></li>
<li><a class="" href="week-3.html"><span class="header-section-number">4</span> Week 3</a></li>
<li><a class="" href="week-3-demo.html"><span class="header-section-number">5</span> Week 3 Demo</a></li>
<li><a class="" href="week-4.html"><span class="header-section-number">6</span> Week 4</a></li>
<li><a class="" href="week-4-demo.html"><span class="header-section-number">7</span> Week 4 Demo</a></li>
<li><a class="" href="week-5.html"><span class="header-section-number">8</span> Week 5</a></li>
<li><a class="" href="week-5-demo.html"><span class="header-section-number">9</span> Week 5 Demo</a></li>
<li><a class="" href="week-6.html"><span class="header-section-number">10</span> Week 6</a></li>
<li><a class="" href="week-6-demo.html"><span class="header-section-number">11</span> Week 6 Demo</a></li>
<li><a class="" href="week-7.html"><span class="header-section-number">12</span> Week 7</a></li>
<li><a class="" href="week-7-demo.html"><span class="header-section-number">13</span> Week 7 Demo</a></li>
<li><a class="" href="week-8.html"><span class="header-section-number">14</span> Week 8</a></li>
<li><a class="" href="week-9.html"><span class="header-section-number">15</span> Week 9</a></li>
<li><a class="" href="week-10.html"><span class="header-section-number">16</span> Week 10</a></li>
<li><a class="" href="exercise-1-word-frequency-analysis.html"><span class="header-section-number">17</span> Exercise 1: Word frequency analysis</a></li>
<li><a class="" href="exercise-2-dictionary-based-methods.html"><span class="header-section-number">18</span> Exercise 2: Dictionary-based methods</a></li>
<li><a class="active" href="exercise-3-comparison-and-complexity.html"><span class="header-section-number">19</span> Exercise 3: Comparison and complexity</a></li>
<li><a class="" href="exercise-4-scaling-techniques.html"><span class="header-section-number">20</span> Exercise 4: Scaling techniques</a></li>
<li><a class="" href="exercise-5-unsupervised-learning-topic-models.html"><span class="header-section-number">21</span> Exercise 5: Unsupervised learning (topic models)</a></li>
<li><a class="" href="exercise-6-unsupervised-learning-word-embedding.html"><span class="header-section-number">22</span> Exercise 6: Unsupervised learning (word embedding)</a></li>
<li><a class="" href="exercise-7-sampling-text-information.html"><span class="header-section-number">23</span> Exercise 7: Sampling text information</a></li>
<li><a class="" href="exercise-9-validation.html"><span class="header-section-number">24</span> Exercise 9: Validation</a></li>
<li><a class="" href="assessment-data.html"><span class="header-section-number">25</span> Assessment data</a></li>
<li><a class="" href="references-2.html"><span class="header-section-number">26</span> References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/cjbarrie/CTA-ED">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="exercise-3-comparison-and-complexity" class="section level1" number="19">
<h1>
<span class="header-section-number">19</span> Exercise 3: Comparison and complexity<a class="anchor" aria-label="anchor" href="#exercise-3-comparison-and-complexity"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction-2" class="section level2" number="19.1">
<h2>
<span class="header-section-number">19.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-2"><i class="fas fa-link"></i></a>
</h2>
<p>The hands-on exercise for this week focuses on: 1) comparing texts; 2) measuring he document-level characteristics of text‚Äîhere, complexity.</p>
<p>In this tutorial, you will learn how to:</p>
<ul>
<li>Compare texts using character-based measures of similarity and distance</li>
<li>Compare texts using term-based measures of similarity and distance</li>
<li>Calculate the complexity of texts</li>
<li>Replicate analyses from <span class="citation">Schoonvelde et al. (<a href="references-2.html#ref-schoonvelde_liberals_2019" role="doc-biblioref">2019</a>)</span>
</li>
</ul>
</div>
<div id="setup-8" class="section level2" number="19.2">
<h2>
<span class="header-section-number">19.2</span> Setup<a class="anchor" aria-label="anchor" href="#setup-8"><i class="fas fa-link"></i></a>
</h2>
<p>Before proceeding, we‚Äôll load the remaining packages we will need for this tutorial.</p>
<div class="sourceCode" id="cb374"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span> <span class="co"># more informative and easy way to import data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io">quanteda</a></span><span class="op">)</span> <span class="co"># includes functions to implement Lexicoder</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io">quanteda.textstats</a></span><span class="op">)</span> <span class="co"># for estimating similarity and complexity measures</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/markvanderloo/stringdist">stringdist</a></span><span class="op">)</span> <span class="co"># for basic character-based distance measures</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span> <span class="co">#for wrangling data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span> <span class="co">#for wrangling data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span> <span class="co">#for visualization</span></code></pre></div>
<p>For this example we‚Äôll be using data from the 2017-2018 Theresa May Cabinet in the UK. The data are tweets by members of this cabinet.</p>
<p>We can load the data as follows.</p>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"data/comparison-complexity/cabinet_tweets.rds"</span><span class="op">)</span></code></pre></div>
<p>If you‚Äôre working on this document from your own computer (‚Äúlocally‚Äù) you can download the tweets data in the following way:</p>
<div class="sourceCode" id="cb376"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tweets</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gzcon.html">gzcon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html">url</a></span><span class="op">(</span><span class="st">"https://github.com/cjbarrie/CTA-ED/blob/main/data/comparison-complexity/cabinet_tweets.rds?raw=true"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>And we see that the data contain three variables: ‚Äúusername,‚Äù which is the username of the MP in question; ‚Äútweet,‚Äù which is the text of the given tweet, and ‚Äúdate‚Äù in days in yyyy-mm-dd format.</p>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 √ó 3
##   username   tweet                                                                                                                                                             date      
##   &lt;chr&gt;      &lt;chr&gt;                                                                                                                                                             &lt;date&gt;    
## 1 aluncairns "A good luck message to Chris Coleman‚Äôs squad @FAWales ahead of tonight‚Äôs crucial World Cup qualifier from @AlunCairns #TogetherStronger https://t.co/lshsaThU1S" 2017-10-09
## 2 aluncairns ".@AlunCairns ‚ÄúThe close relationship between industry and government stand only to benefit manufacturers in Wales.‚Äù @SPTS_Tech https://t.co/cO1HHdOKkA"          2017-10-09
## 3 aluncairns "@BarclaysCorp &amp;amp; @SPTS_Tech \"voice of Welsh Manufacturing\" event with @AlunCairns &amp;amp; @SarahOnTheNews. Let's talk! https://t.co/Eby4MfzRIn"               2017-10-09
## 4 aluncairns "Today we announced plans to ban the sale of ivory in the UK.\nThe cruel poaching of elephants shames our generation\n\nhttps://t.co/N8RtEwHvTU"                  2017-10-06
## 5 aluncairns "Unbeaten Wales overcome Georgia to boost their @FIFAWorldCup qualification hopes. üí™ https://t.co/5zdhROAhl0"                                                    2017-10-06
## 6 aluncairns ".@GutoAberconwy marks 25 years of engine production @toyotafactory Deeside #strongereconomy https://t.co/lbwPDF8lPw https://t.co/bqKlWyIFlJ"                     2017-10-06</code></pre>
<p>And there are 24 MPs whose tweets we‚Äôre examining.</p>
<div class="sourceCode" id="cb379"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">username</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "aluncairns"      "amberrudduk"     "andrealeadsom"   "borisjohnson"    "brandonlewis"    "damiangreen"     "damianhinds"     "daviddavismp"    "davidgauke"      "davidmundelldct"
## [11] "dlidington"      "gavinwilliamson" "gregclarkmp"     "jbrokenshire"    "jeremy_hunt"     "juliansmithuk"   "justinegreening" "liamfox"         "michaelgove"     "pennymordaunt"  
## [21] "philiphammonduk" "sajidjavid"      "theresa_may"     "trussliz"</code></pre>
<div class="sourceCode" id="cb381"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">username</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 24</code></pre>
</div>
<div id="generate-document-feature-matrix" class="section level2" number="19.3">
<h2>
<span class="header-section-number">19.3</span> Generate document feature matrix<a class="anchor" aria-label="anchor" href="#generate-document-feature-matrix"><i class="fas fa-link"></i></a>
</h2>
<p>In order to use the <code>quanteda</code> package and its accompanying <code>quanteda.textstats</code> package, we need to reformat the data into a quanteda ‚Äúcorpus‚Äù object. To do this we just need to specify the text we‚Äôre interested in as well as any associated document-level variables in which we‚Äôre interested.</p>
<p>We can do this as follows.</p>
<div class="sourceCode" id="cb383"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#make corpus object, specifying tweet as text field</span>
<span class="va">tweets_corpus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">tweets</span>, text_field <span class="op">=</span> <span class="st">"tweet"</span><span class="op">)</span>

<span class="co">#add in username document-level information</span>
<span class="fu"><a href="https://quanteda.io/reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">tweets_corpus</span>, <span class="st">"username"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">tweets</span><span class="op">$</span><span class="va">username</span>

<span class="va">tweets_corpus</span></code></pre></div>
<pre><code>## Corpus consisting of 10,321 documents and 2 docvars.
## text1 :
## "A good luck message to Chris Coleman‚Äôs squad @FAWales ahead ..."
## 
## text2 :
## ".@AlunCairns ‚ÄúThe close relationship between industry and go..."
## 
## text3 :
## "@BarclaysCorp &amp;amp; @SPTS_Tech "voice of Welsh Manufacturing..."
## 
## text4 :
## "Today we announced plans to ban the sale of ivory in the UK...."
## 
## text5 :
## "Unbeaten Wales overcome Georgia to boost their @FIFAWorldCup..."
## 
## text6 :
## ".@GutoAberconwy marks 25 years of engine production @toyotaf..."
## 
## [ reached max_ndoc ... 10,315 more documents ]</code></pre>
<p>We are now ready to reformat the data into a document feature matrix.</p>
<div class="sourceCode" id="cb385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html">dfm</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">tweets_corpus</span><span class="op">)</span>,
             remove_punct <span class="op">=</span> <span class="cn">TRUE</span>, 
             remove <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span><span class="op">(</span><span class="st">"english"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
<pre><code>## Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfmat</span></code></pre></div>
<pre><code>## Document-feature matrix of: 10,321 documents, 26,852 features (99.95% sparse) and 2 docvars.
##        features
## docs    good luck message chris coleman's squad @fawales ahead tonight's crucial
##   text1    1    1       1     1         1     1        1     1         1       1
##   text2    0    0       0     0         0     0        0     0         0       0
##   text3    0    0       0     0         0     0        0     0         0       0
##   text4    0    0       0     0         0     0        0     0         0       0
##   text5    0    0       0     0         0     0        0     0         0       0
##   text6    0    0       0     0         0     0        0     0         0       0
## [ reached max_ndoc ... 10,315 more documents, reached max_nfeat ... 26,842 more features ]</code></pre>
<p>Note that when we do this we need to have tokenized our corpus object first. We can do this by wrapping the <code>tokens</code> function inside the <code><a href="https://quanteda.io/reference/dfm.html">dfm()</a></code> function as above.</p>
<p>So what is this object? Well the documents here are tweets. And the matrix is a sparse (i.e., mostly zeroes) matrix of 1s and 0s for whether a given word appears in the document (tweet) in question.</p>
<p>The vertical elements (columns) of this vector are made up of all the words used in all of the tweets combined. Here, it helps to imagine every tweet positioned side by side to understand what‚Äôs going on here.</p>
</div>
<div id="compare-between-mps" class="section level2" number="19.4">
<h2>
<span class="header-section-number">19.4</span> Compare between MPs<a class="anchor" aria-label="anchor" href="#compare-between-mps"><i class="fas fa-link"></i></a>
</h2>
<p>Once we have our data in this format, we are ready to compare between the text produced by members of Theresa May‚Äôs Cabinet.</p>
<p>Here‚Äôs an example of the correlations between the combined tweets of 5 of the MPs with each other.</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">corrmat</span> <span class="op">&lt;-</span> <span class="va">dfmat</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://quanteda.io/reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">username</span><span class="op">)</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="st">"documents"</span>, method <span class="op">=</span> <span class="st">"correlation"</span><span class="op">)</span>

<span class="va">corrmat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></code></pre></div>
<pre><code>## 5 x 5 Matrix of class "dspMatrix"
##               aluncairns amberrudduk andrealeadsom borisjohnson brandonlewis
## aluncairns     1.0000000   0.3560112     0.4441145    0.3985566    0.4671484
## amberrudduk    0.3560112   1.0000000     0.4793208    0.4623618    0.5847989
## andrealeadsom  0.4441145   0.4793208     1.0000000    0.5486360    0.6851911
## borisjohnson   0.3985566   0.4623618     0.5486360    1.0000000    0.6613734
## brandonlewis   0.4671484   0.5847989     0.6851911    0.6613734    1.0000000</code></pre>
<p>Note that here we‚Äôre using the <code><a href="https://quanteda.io/reference/dfm_group.html">dfm_group()</a></code> function, which allows you to take a document feature matrix and make calculations while grouping by one of the document-level variables we specified above.</p>
<p>There are many different measures of similarity, however, that we might think about using.</p>
<p>In the below, we combine four different measures of similarity, and see how they compare to each other across MPs. Note that here we‚Äôre looking only at the similarity between an MP‚Äôs tweets and those of then Prime Minister, Theresa May.</p>
</div>
<div id="compare-between-measures" class="section level2" number="19.5">
<h2>
<span class="header-section-number">19.5</span> Compare between measures<a class="anchor" aria-label="anchor" href="#compare-between-measures"><i class="fas fa-link"></i></a>
</h2>
<p>Let‚Äôs see what this looks like for one of these measures‚Äîcosine similarity.</p>
<p>We first get similarities between the text of MP tweets and all other MPs.</p>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#estimate similarity, grouping by username</span>

<span class="va">cos_sim</span> <span class="op">&lt;-</span> <span class="va">dfmat</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://quanteda.io/reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">username</span><span class="op">)</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="st">"documents"</span>, method <span class="op">=</span> <span class="st">"cosine"</span><span class="op">)</span> <span class="co">#specify method here as character object</span></code></pre></div>
<p>But remember we‚Äôre only interested in how they compare to what Theresa May has been saying.</p>
<p>So we need to take these cosine similarities and retain only those similarity measures corresponding to the text of Theresa May‚Äôs tweets.</p>
<p>We first convert the <code><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil()</a></code> output to a matrix.</p>
<div class="sourceCode" id="cb393"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cosmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">cos_sim</span><span class="op">)</span> <span class="co">#convert to a matrix</span></code></pre></div>
<p>And we can see that the 23rd row of this matrix contains the similarity measures with the Theresa May tweets.</p>
<p>We take this row, removing the similarity of Theresa May with herself (which will always = 1), and convert it to a datframe object.</p>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#generate data frame keeping only the row for Theresa May</span>
<span class="va">cosmatdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">cosmat</span><span class="op">[</span><span class="fl">23</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">22</span>, <span class="fl">24</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p>We then rename the cosine similarity column with an appropriate name and convert row names to a column variable so that we have cells containing information on the MP to which the cosine similarity measure refers.</p>
<div class="sourceCode" id="cb395"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#rename column</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">cosmatdf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"corr_may"</span>
  
<span class="co">#create column variable from rownames</span>
<span class="va">cosmatdf</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span><span class="va">cosmatdf</span>, <span class="st">"username"</span><span class="op">)</span></code></pre></div>
<p>And like so we have our data in tidy format, which we can then plot like so.</p>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cosmatdf</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">username</span>, <span class="op">-</span><span class="va">corr_may</span><span class="op">)</span>, y<span class="op">=</span> <span class="va">corr_may</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"MP username"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Cosine similarity score"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-150-1.png" width="672"></div>
<p>Combining these steps into a single <code>for</code> loop, we can see how our different similarity measures of interest compare.</p>
<div class="sourceCode" id="cb397"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#specify different similarity measures to explore</span>
<span class="va">methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"correlation"</span>, <span class="st">"cosine"</span>, <span class="st">"dice"</span>, <span class="st">"edice"</span><span class="op">)</span>

<span class="co">#create empty dataframe</span>
<span class="va">testdf_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span>

<span class="co">#gen for loop across methods types</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">methods</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co">#pass method to character string object</span>
  <span class="va">sim_method</span> <span class="op">&lt;-</span> <span class="va">methods</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>
  
  <span class="co">#estimate similarity, grouping by username</span>
  <span class="va">test</span> <span class="op">&lt;-</span> <span class="va">dfmat</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://quanteda.io/reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">username</span><span class="op">)</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="st">"documents"</span>, method <span class="op">=</span> <span class="va">sim_method</span><span class="op">)</span> <span class="co">#specify method here as character object created above</span>
  
  <span class="va">testm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span> <span class="co">#convert to a matrix</span>
  
  <span class="co">#generate data frame keeping only the row for Theresa May</span>
  <span class="va">testdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">testm</span><span class="op">[</span><span class="fl">23</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">22</span>, <span class="fl">24</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
  
  <span class="co">#rename column</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">testdf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"corr_may"</span>
  
  <span class="co">#create column variable from rownames</span>
  <span class="va">testdf</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span><span class="va">testdf</span>, <span class="st">"username"</span><span class="op">)</span>
  
  <span class="co">#record method in new column variable</span>
  <span class="va">testdf</span><span class="op">$</span><span class="va">method</span> <span class="op">&lt;-</span> <span class="va">sim_method</span>

  <span class="co">#bind all together</span>
  <span class="va">testdf_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">testdf_all</span>, <span class="va">testdf</span><span class="op">)</span>  
  
<span class="op">}</span>

<span class="co">#create variable (for viz only) that is mean of similarity scores for each MP</span>
<span class="va">testdf_all</span> <span class="op">&lt;-</span> <span class="va">testdf_all</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">username</span><span class="op">)</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>mean_sim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">corr_may</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## group_by: one grouping variable (username)</code></pre>
<pre><code>## mutate (grouped): new variable 'mean_sim' (double) with 23 unique values and 0% NA</code></pre>
<div class="sourceCode" id="cb400"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">testdf_all</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">username</span>, <span class="op">-</span><span class="va">mean_sim</span><span class="op">)</span>, y<span class="op">=</span> <span class="va">corr_may</span>, color <span class="op">=</span> <span class="va">method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"MP username"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Similarity score"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-151-1.png" width="672"></div>
</div>
<div id="complexity-1" class="section level2" number="19.6">
<h2>
<span class="header-section-number">19.6</span> Complexity<a class="anchor" aria-label="anchor" href="#complexity-1"><i class="fas fa-link"></i></a>
</h2>
<p>We now move to document-level measures of text characteristics. And here we will focus on the paper by <span class="citation">Schoonvelde et al. (<a href="references-2.html#ref-schoonvelde_liberals_2019" role="doc-biblioref">2019</a>)</span>.</p>
<p>We will be using a subset of these data, taken from EU speeches given by four politicians. These are provided by the authors at <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/S4IZ8K">https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/S4IZ8K</a>.</p>
<p>We can load the data as follows.</p>
<div class="sourceCode" id="cb401"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">speeches</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"data/comparison-complexity/speeches.rds"</span><span class="op">)</span></code></pre></div>
<p>If you‚Äôre working on this document from your own computer (‚Äúlocally‚Äù) you can download the tweets data in the following way:</p>
<div class="sourceCode" id="cb402"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">speeches</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/gzcon.html">gzcon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html">url</a></span><span class="op">(</span><span class="st">"https://github.com/cjbarrie/CTA-ED/blob/main/data/comparison-complexity/speeches.rds?raw=true"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>And we can take a look at what the data contains below.</p>
<div class="sourceCode" id="cb403"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">speeches</span><span class="op">)</span></code></pre></div>
<pre><code>##           speaker
## 1 J.L.R. Zapatero
## 2 J.L.R. Zapatero
## 3 J.L.R. Zapatero
## 4 J.L.R. Zapatero
## 5 J.L.R. Zapatero
## 6 J.L.R. Zapatero
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              text
## 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Dear friends, good morning to you all, both men and women. Thank you very much, Enriqueta, for you work, for your attitude and for your e-mails, for your messages of affection -some of them, so beautiful- and for making the Federation of Progressit Women possible, creating it and providing it with dignity. Thanks to all those women who form part of this Federation for their work, for their spirit and for their temperament. I haven't heard anything resembling a cry or an insult in all the voices that have spoken out from this tribune, because we are talking about equality and equality is the deepest expression of the dignity of men, of the rights of men, of citizens; it is not compatible with looking down on anyone, with shouting or insulting. Equality and dignity are a form of respect. Thanks for working with respect. Thanks to the Federation of Progressist Women. I have been awarded this prize - and I am going to use the stereotype - and apart from picking it up with affection, which I do, I pick up interpreting that it is a prize for most of the Spanish society, which has made it possible for us to do what we can do from the Government; or better, to do what must be done from the Government. The Spanish society is not afraid of equality. The Spanish society defends and believes in equality, in the equality between men and women, of course; in the equality that still has a long way to go. Thus, for me, this prize represents a firm, committed souvenir of the way we still have to go, rather than the recognition to the task of a Government, so that not a single woman is dominated, discriminated, mistreated, forgotten in this society. And there are still too many. I would like to tell you that the equality and the dignity of men and women is the great motor, the great horizon of my political project. I can assure that there are persons, women and, fortunately enough, more men each time, who are going to keep moving on in favour of equality and dignity, and I can assure that I am going to lead those men and women in this country who want more equality and more rights and freedoms for women and for all citizens. You can trust my commitment. This prize has a great value for it was awarded by the associational movement, which I always try to praise and value and to which I try to show my gratitude; an associational movement that has taught and is still teaching us a lesson, that has spotted the problem, that has called the attention of long-forgotten problems and that has lent its voice to those who had been deprived of it, to those who had been silenced. Thanks to the associational movement, to all the organisations that step by step, with their constant effort, give our society a horizon with more rights, with more freedoms and with more equality. I have said it more than once and I must repeat it again here: I am a convinced feminist and I am proud of it. And I would like to tell you something that is very important: I think I have passed this spirit on to the Vice President, to practically the whole Government and to practically the whole Socialist Party. I can tell you that your twenty years of work in favour of the equality of rights and opportunities have been worth it. You may feel proud of yourselves. You have broken conventions and stereotypes that, as Pedro said when he referred to his career from his childhood and to his mother, when one looks back and reflects upon the meaning of the treatment, the consideration and the dominance exerted upon women for centuries in our society, one is tempted to state - and I think that it is a fair thing to do - that we cannot feel proud of History and we cannot feel proud of the history of civilisation, because in most societies it is blotted by the fact that it has dominated, forgotten, marginalized and discriminated women. The 20th century was basically the first time in History when the dawn of equality brought hope to the 21st century, not only to the Spanish society, but to all societies, and there are many societies characterised by painful, intolerable and unbearable marginalization and discrimination and this must become a turning point in History. I would also like to congratulate all those who have received the prize. Congratulations to Mr. Arsenio Escolar, director of ""20 Minutos"". Life always forces us to chose, to decide among different dilemmas and you chose to support the dignity of women when you had to choose among publicity benefits and the dignity of women, taking out those short ads referring to prostitution. This honours you and this honours us. Thank you very much, Arsenio. Ms. Paz Hernandez Felgueroso, Ms. Maria Jose Ramos and Ms. Begona Fernandez, with their Casa Malva, a welcoming, nice name, have given an exemplary public answer to a social blot and its consequences, namely, gender violence. Congratulations on this deserved prize and I wish you will keep on going, with courage, working in that direction, so that there may be each time more centres, more homes like the Casa Malva, in order to make us think about who need investments and public resources and also think how can a society be dignified, a common task, such as the task that leaders carry out in a democracy. A Casa Malva to restore the dignity of mistreated women. It has been mentioned here that we have observed the compromise of making a first law on gender violence in this Legislature. This was the first one elaborated and taken to the Parliament by the Government; a law that is the beginning; a law without which we would not have had any hope and a law that is not going to do away with the blot of criminal male chauvinism on its own. But this Law must be added our will and yours; this Law must be added measures, resources and a calling to the general awareness, which I would like to repeat today, from all the public operators, from all the public Administrations of Justice, of the State Security Forces and Bodies, and from all the social, support network, so that they may know and remember that the Government is asking them, as their first duty as public servers, to pay attention and be near those women who might suffer or have already suffered gender violence. You know that our Government has placed equality at the first position among the values that any country should defend; an equality that can only be efficient and real if it is based upon rights and rights are included in Laws. Thus, the Law on equality has opened up a space at work, harmonising work and family life, in the public arena, and also in the big companies, in the area of economic power, a determinant, decisive space for equality. I am very sorry that this Law has not been supported by all the political parties and I am even sorrier about the fact that it has been appealed before the Constitutional Court. It is not possible to appeal equality between men and women, no amendment is possible; no amendment or petition. Pedro, I start with you now. You know I admire you and I can tell you, because people sometimes say things about you, as President of the Government of Spain, that this country is proud of you. What else could a country offer to the rest of the world? Its culture and the different artistic creations. It is there that talent, creativity, the seed of freedom and the values of equality lie. It is there. It is there that the origin lies and having a well-known, internationally praised director is one of the best occasions to feel a patriot, to feel Spanish in the broad sense of the word.Thank you, Pedro. The whole work of Pedro, especially as far as his female characters are concerned, is a move in favour of equality, because his female characters break the conventions and the stereotypes, and they are a great proof of the hard, everyday life of working women, who devote all their efforts to a family that does not thank them for it or recognise their work. He shows us the profiles of that extraordinary strength that Pedro was mentioning a while ago, with great realism; strength, mainly in sweetness, mainly in love and mainly in courage, because only courage makes it possible to attain equality, that type of equality that is present in all your films, defending women in your films. Yet, women are the best characters in your films, in my opinion, Pedro, the most solid ones, and sometimes the most tormented and the best defined ones. You have been able to outline them in your films and several generations of Spanish women have seen themselves reflected in your films. We saw this when we were having a look at some of the photographs. I would also like to praise, through this prize, in a special way, in a very special way, all those generations of Spanish women who have had to live without being able to speak up, without being able to study, to ask; having to remain silent, to obey; having to assume that they were different and inferior. All that generation of women who left many things behind in their lives, because they were not allowed to have a life; all those women deserve my deepest praise, those Spanish women who have not been able to live in freedom. I would like to conclude with two ideas: one has to do with democracy and politics, and the other one with emotions. I will start with politics and democracy. When one arrives enters power -I am not going to comment on those matters pointed out by Pedro Almodovar, for as you know I am not a specialist in that- one contemplates, knows the social reality even better than before being in power, of course. The conclusion I would like to express, the one I have always expressed and I will always keep expressing from my experience as President of the Government. I am convinced that in those countries where there is equality between men and women there is more freedom, more life, more creativity, more respect and more democracy; that wherever there is more power - and let's analyse and see through the eyes of a social reality - wherever there is more power in the hardest sense of the word, and also in the less democratic sense of the word, there are less women. Therefore, for a progressist, for someone who believes in changes, in reform, in transformation and in equality, changing a society implies having more women in those places in which they were not in the past and it also implies that men will have to assume that they do it just like us and, in most cases, better than us. The second thing I would like to say, just to conclude, has to do with emotions, with the field of emotions. This celebration is for me one of the most dearly ones that I have attended so far as President of the Government. Nothing excites me more than contemplating a country with a clear horizon in favour of freedom and equality. Nothing excites me more than being able to contribute with my grain of sand or with many grains of sand so that every day in Spain women may have more freedom, dignity and equality. Today is a good day to say this. I feel very proud of being able to lead the values that you represent. Thank you very much.
## 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Honourable President, Honourable Deputies, I want to start with a moving mention to the six ""Blue Helmets"", soldiers of the Spanish army who died tragically last Sunday, 24 th of June, in Southern Lebanon, and transmit to their families our deepest condolences for their irreparable loss. The Minister of Defence will attend, at his own request, the corresponding Commission of these Chambers in order to give a detailed explanation on the research that is currently being carried out concerning the circumstances and consequences of the attack. I know that I word the feelings of Your Honours by expressing in this very moment the recognition and support for the valuable, heroic task of our contingent in Southern Lebanon. And I also know that I word the feelings of the Spanish citizens by stating that Manuel David Portas, Jonathan Galea, Jefferson Vargas, Yeison Alejandro Casta√±o, Yhon Edisson Posada and Juan Carlos Villoria, either born in Spain or in Colombia, will always be one of us and will always be with us. They lived together, patrolled together and gave their lives together for the same cause. Their families will always feel the encouraging support of the Spanish society, the support of the institutions and the proximity of many citizens that share their immense pain today. Their cause was the cause of peace and solidarity. The cause for which our Army and our Civil Guard are there, in Lebanon, with a triple backing: legal, politic and moral. They are there following the explicit demand contained in Resolution 1071 of the United Nations Security Council; they are there with the support of all the Parliamentary Groups of these Chambers, at the suggestion of the Government, as expressed last September 2006; they are there with the moral urge of contributing to maintaining the cease-fire in a very dangerous zone, helping the locals dismantle the mines, and backing the reconstruction tasks; but they are there, mainly, on a peace operation of the United Nations, contributing with their efforts and sacrifice and even giving their lives in order to help to establish stability in an area where most of the events that place world peace at risk are elucidated. Thus, apart from us, the Heads of State and Government and the heads of international organisms, and in particular, the General Secretary of the United Nations, Mr. Ban-Ki-Moon have also paid homage to them. We have paid a very high price, but our commitment with peace in the Middle East will not be altered, nor shall we stop offering our support to the United Nations as the main factor in order to reach peace. We will also persist in our determination so that those who are guilty for this deadly blast assume it and pay for their felony and, of course, so that they never attain their aims. Honourable President, Honourable Deputies, I will now go on to analyse de results of the European Council held in Brussels last 21 st and 22 nd of June, this year, which makes me feel great satisfaction. We had gone through a two-year blocking, which on many occasions revealed itself as a form of paralysis, and we risked to continue in this situation, damaging the very consistency of the European project. We could have got lost in the inextricable labyrinth of the particular demands of twenty seven States and we could have been defeated by the temptation to postpone the progression to a further attempt. Nothing of this would have been useful for the European Union. Yet, Honourable Deputies, we have made it. We have an agreement that will reactivate the process of European Integration. It is a huge step forward for Europe and a good move for Spain. We, the Heads of State and Government, have agreed upon an order to carry out an Intergovernmental Conference that will adopt a new Treaty for the Reform of the European Union. This order has an extraordinary political meaning, because it develops all the relevant aspects of the future Reform Treaty. Thus, the commitment we have reached represents in fact the future Reform Treaty. Therefore, this commitment represents an agreement de facto and an initial agreement that affects both the form and the content of the new Treaty. It has been, Honourable Deputies, a long, complex negotiation. It was not easy to reach an agreement after such an important, varied political breach among the member States. In some cases, such as in our case, the Governments had received a clear order from the people and from the parliament in favour of the text of the Constitutional Treaty. In some other cases, such as in the case of France and Holland, the citizens had positioned themselves against it. Two years and deep reflection, comprehension and political willpower have been necessary in order to overcome this situation. The Government pointed out from the very first moment that its main aim in the negotiation was to take Europe out from the state of stagnation into which it had fallen; of course, preserving the essential contents and the balance of the Constitutional Treaty, at all times. We believed that Europe needed a solution as soon as possible and that this European Council was the chance to get it. And we have made proposals; we have been active, available and we have worked for it. We offered full support to the German Presidency and we backed its efforts through direct contacts with the member States that posed greater difficulties. We explained clearly and in due time the main points of our position and we pointed out the limits that would never be given up. In that framework we proved ourselves flexible enough to understand and add the coherent proposals to an adequate solution agreed upon through consensus. Thus, we increased confidence in the relationship with our partners. All this has been essential for these days' negotiation in Spain to contribute directly to fix the terms of the agreement. Honourable Deputies, the success of the European Council is our own success. We all had risked a lot in this negotiation. It is a success for Europe and for us as European citizens. It is a success for Spain and for the interests of Spain. All the contents of the Constitutional Treaty that we considered essential are included in the new Treaty. This means exactly that the most efficient and democratic Europe the Spanish voted for at the referendum will soon become a reality as soon as the new text of the Treaty comes into force. It is true that in order to achieve this agreement we have had to make concessions too. Spain would have preferred to have come further, with a single Treaty simplifying the European legislation, keeping the term ""Constitution"" and the reference to the symbols of the Union. Those seemed to us positive contributions, but we also knew that those were not the substantial aspects of the Treaty. It was not those aspects that placed the future of Europe at risk. Thus, it was decided that if this terminology posed difficulties to the other States concerning the agreement, we could eventually accept its modification. The final result is an excellent one. If the previous Treaty was said not to be a proper Constitution, the new one will doubtlessly have to be recognized as much more than a Treaty, from a political point of view. It is a project with a foundational character, a Treaty for the new Europe. The new Treaty establishes in a clear way the binding juridical value of the Charter of Fundamental Rights and Duties. This recognition is essential in order to bring into force our shared value system. Besides, the Treaty introduces a substantial advance for the efficient functioning of the European Union. The subjects that may be voted by qualified majority will increase from 36 to 85, which sets a significant limit to the principle of unanimity that slows down or blocks decision-making in Europe so many times. Once it comes into force, the qualified majority will be the regime applicable to other delicate questions for Spain such as immigration, energy and cooperation in the areas of justice and internal affairs. These areas have a great potential inside the European Union and they require a more agile system in order to be developed. Our citizens, the Spanish citizens, will be the first to experience the benefits of these measures. As the Honourable Deputies already know, the definition of the qualified majority voting system has been one of the most discussed questions at this Council. We finally have reached an agreement which consists in keeping the existing system until the 1 st of November 2014, with a further transition period until the 31 st of March 2017, during which the blocking minorities may constitute themselves either upon the basis of the system in force, the one known as ""Nice system"", or upon the basis of the double majority system, following the decision of the interested States. Both in the case of the existing system and in the case of the double majority system, Spain has an adequate representation, according to its population; but Spain wishes to have a superior influence, as compared to its own number of votes or to what its inhabitants represent, since it knows, by its own experience, that real power in the Union does not depend on more or less votes, but on the capacity of the member States to generate confidence, attract involvement, make alliances and defend its national positions from a European perspective. Against the option of the blocking minorities, the Treaty proposes reinforced cooperation and establishes that these may be promoted by nine States minimum. This is also especially relevant for a country such as Spain, which wants to be at the avant-garde of the integration process in almost all the fields of action of the Union. And there is something more: before the end of October this year, a proposal on the new composition of the European Parliament will have to be put forward, and with regards to this proposal, it guarantees an increase in the number of seats corresponding to Spain during the elections to the Parliament that will be celebrated in 200 As far as the institutional field is concerned, with the creation of the new figures, namely, the President of the Council of the European Union and High Representative for the Common Foreign and Security Policy, Europe will progressively reinforce its efficiency, its visibility and its importance as an authentic European Government. Thanks to these figures it will be easier to identify the personality of the Union and speak on its behalf with a single voice in the international area. It is a very important step in the process of political integration in the European Union, which will give institutional coherence to the functioning of the Council and to the direction and development of the Common Foreign and Security Policy, besides, thanks to the Treaty it will also have an external European service so that it can enter into force. Moreover, the Treaty is a great advance as far as the creation of a Space for Freedom, Security and Justice is concerned, these depend completely on the qualified majority after the introduction in this category of the areas of police and criminal cooperation. These are very good news for Spain and promoting such policies at a European level is a reward to our efforts, and it is also a very significant change for our citizens, as it reinforces the protection of their interests and of their security. With this new framework for actuation, the European policy on immigration promoted by the Spanish Government will be more efficient from the perspective of the European Union. Besides, as far as another question of strategic importance for Spanish interests is concerned, the Treaty makes specific reference to the promotion of energetic interconnections among the member States, which, as the Honourable Deputies know, is an essential landmark for the security and development of our energetic policy. The Union recognizes that the principle of energetic solidarity can not be understood in Europe without the development of interconnections. This means, doubtlessly, a great support for the achievement of such interconnections, which are vital for our energetic system. Spain has also been able to keep, in the new text, the improvements established by the Constitutional Treaty with regards to a question that is rather delicate in the case of our country, that concerning the Statute of Ultra-peripheral Regions. At the same time, the Treaty reinforces the role of the national Parliaments, by increasing their capacity to intervene in the European legislative process whenever a simple majority of the votes attributed to those national Parliaments deems that the project put forward does not respect the principle of subsidiarity. Honourable Deputies, I believe that we can be really satisfied with these results. We have not left out any substantial point of the Constitutional Treaty and we have obtained some positive changes for Spain. As far as Spain, this Council has been a reinforcement of our position in Europe. We have worked in cooperation and in harmony with the German Presidency, and I would like to congratulate them once more, from here, on the success achieved thanks to this agreement; the political determination of the German Presidency has doubtlessly been essential for the command that the European Council has given to the Intergovernmental Conference. We have kept a close contact with France, which is the country with which we presented a common proposal a few hours before the meeting of the European Council. And I can tell you that the coordination of our positions and the common mediation have been very useful for the German Presidency. Similarly, we have been working with Italy, Belgium and Luxembourg in order to defend those parts of the Constitutional Treaty that we considered essential. Spain has acted in favour of stability and agreement. It has generated confidence during the whole negotiation and with this attitude we have been able to impulse the defence of the contents and the ambition of a new Treaty. Portugal , the country that will occupy the European Presidency during the next semester, will have our full support during the Intergovernmental Conference. I am convinced that we will have a new Treaty this same year and that its ratification process will take place without any further difficulties. Honourable Deputies, Even though this negotiation about the new Treaty has been the centre of attention of the debates of the Council, during this Council other conclusions about other matters have also been approved of. As you will see, these matters, which I will briefly refer to next, are also of importance for Spain. The Council went on dealing with European immigration policies, following the proposals of Spain. Thus, it stated the need to develop further on the actions in Africa and in the Mediterranean region, signing new Mobility Agreements with the Countries of origin and with the Countries of passage; it congratulated itself on the achievement of agreements for the creation of quick intervention teams and a network of coastal patrols, and it decided to keep reinforcing the capacity of the European Exterior Frontiers Agency. Besides, the Council reaffirmed the importance of the fact that a good management of legal immigration may contribute to dissuade illegal migration flows, and it developed some aspects of the application of this European policy on immigration in the Eastern and South-eastern frontiers of the Union. As far as economic, social and environmental policies are concerned, the Council paid attention to the progress made and to the projects that are currently being carried out with regards to matters such as joint technological initiatives or the European Institute of Technology; it repeated the importance of moving forward towards a European, efficient and sustainable transport, and it also encouraged the work on coordination of the social security systems and on the application of the Action Plan against AIDS. Finally, the conclusions of the Council also focus on the European neighbourhood policy, the strategy of the European Union for a new association with Central Asia and the dialogue process with the so-called emerging economies. Similarly, the European Council celebrated the fact that Cyprus and Malt are in condition to adopt the euro by next 1 st of January 200 Honourable Deputies, These have been the main contents of the European Council that has given us back the image of the Europe we want, the Europe in which we believe and for which we have been working so far: a Europe full of ambition and built upon consensus. Spain and Europe have come out of this process even stronger. We were the first to ratify, by referendum, the Constitutional Treaty. In so doing, we reinforced it so that it could survive in essence against the difficulties. We have now contributed in a decisive way to lay the foundations for the agreement and we have proved our solidarity throughout the negotiation. Spain is perceived at a European level as a member State that transmits stability and confidence, and assumes its responsibilities when Europe requires it. This is how we are perceived, this is how we are needed and this is how we are recognized. It is for this reason that we should feel reasonably satisfied and proud of our contribution and, also, and mainly, because Europe has achieved an agreement that will be applied and it will thus bring about a more democratic, efficient functioning of the Union, which is, no doubt, what most of the Spanish and what most of the European citizens want. Thank you very much.
## 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Honourable President, Honourable Deputies, I want to start with a moving mention to the six ""Blue Helmets"", soldiers of the Spanish army who died tragically last Sunday, 24th of June, in Southern Lebanon, and transmit to their families our deepest condolences for their irreparable loss. The Minister of Defence will attend, at his own request, the corresponding Commission of these Chambers in order to give a detailed explanation on the research that is currently being carried out concerning the circumstances and consequences of the attack. I know that I word the feelings of Your Honours by expressing in this very moment the recognition and support for the valuable, heroic task of our contingent in Southern Lebanon. And I also know that I word the feelings of the Spanish citizens by stating that Manuel David Portas, Jonathan Galea, Jefferson Vargas, Yeison Alejandro Casta√±o, Yhon Edisson Posada and Juan Carlos Villoria, either born in Spain or in Colombia, will always be one of us and will always be with us. They lived together, patrolled together and gave their lives together for the same cause. Their families will always feel the encouraging support of the Spanish society, the support of the institutions and the proximity of many citizens that share their immense pain today. Their cause was the cause of peace and solidarity. The cause for which our Army and our Civil Guard are there, in Lebanon, with a triple backing: legal, politic and moral. They are there following the explicit demand contained in Resolution 1071 of the United Nations Security Council; they are there with the support of all the Parliamentary Groups of these Chambers, at the suggestion of the Government, as expressed last September 2006; they are there with the moral urge of contributing to maintaining the cease-fire in a very dangerous zone, helping the locals dismantle the mines, and backing the reconstruction tasks; but they are there, mainly, on a peace operation of the United Nations, contributing with their efforts and sacrifice and even giving their lives in order to help to establish stability in an area where most of the events that place world peace at risk are elucidated. Thus, apart from us, the Heads of State and Government and the heads of international organisms, and in particular, the General Secretary of the United Nations, Mr. Ban-Ki-Moon have also paid homage to them. We have paid a very high price, but our commitment with peace in the Middle East will not be altered, nor shall we stop offering our support to the United Nations as the main factor in order to reach peace. We will also persist in our determination so that those who are guilty for this deadly blast assume it and pay for their felony and, of course, so that they never attain their aims. Honourable President, Honourable Deputies, I will now go on to analyse de results of the European Council held in Brussels last 21st and 22nd of June, this year, which makes me feel great satisfaction. We had gone through a two-year blocking, which on many occasions revealed itself as a form of paralysis, and we risked to continue in this situation, damaging the very consistency of the European project. We could have got lost in the inextricable labyrinth of the particular demands of twenty seven States and we could have been defeated by the temptation to postpone the progression to a further attempt. Nothing of this would have been useful for the European Union. Yet, Honourable Deputies, we have made it. We have an agreement that will reactivate the process of European Integration. It is a huge step forward for Europe and a good move for Spain. We, the Heads of State and Government, have agreed upon an order to carry out an Intergovernmental Conference that will adopt a new Treaty for the Reform of the European Union. This order has an extraordinary political meaning, because it develops all the relevant aspects of the future Reform Treaty. Thus, the commitment we have reached represents in fact the future Reform Treaty. Therefore, this commitment represents an agreement de facto and an initial agreement that affects both the form and the content of the new Treaty. It has been, Honourable Deputies, a long, complex negotiation. It was not easy to reach an agreement after such an important, varied political breach among the member States. In some cases, such as in our case, the Governments had received a clear order from the people and from the parliament in favour of the text of the Constitutional Treaty. In some other cases, such as in the case of France and Holland, the citizens had positioned themselves against it. Two years and deep reflection, comprehension and political willpower have been necessary in order to overcome this situation. The Government pointed out from the very first moment that its main aim in the negotiation was to take Europe out from the state of stagnation into which it had fallen; of course, preserving the essential contents and the balance of the Constitutional Treaty, at all times. We believed that Europe needed a solution as soon as possible and that this European Council was the chance to get it. And we have made proposals; we have been active, available and we have worked for it. We offered full support to the German Presidency and we backed its efforts through direct contacts with the member States that posed greater difficulties. We explained clearly and in due time the main points of our position and we pointed out the limits that would never be given up. In that framework we proved ourselves flexible enough to understand and add the coherent proposals to an adequate solution agreed upon through consensus. Thus, we increased confidence in the relationship with our partners. All this has been essential for these days' negotiation in Spain to contribute directly to fix the terms of the agreement. Honourable Deputies, the success of the European Council is our own success. We all had risked a lot in this negotiation. It is a success for Europe and for us as European citizens. It is a success for Spain and for the interests of Spain. All the contents of the Constitutional Treaty that we considered essential are included in the new Treaty. This means exactly that the most efficient and democratic Europe the Spanish voted for at the referendum will soon become a reality as soon as the new text of the Treaty comes into force. It is true that in order to achieve this agreement we have had to make concessions too. Spain would have preferred to have come further, with a single Treaty simplifying the European legislation, keeping the term ""Constitution"" and the reference to the symbols of the Union. Those seemed to us positive contributions, but we also knew that those were not the substantial aspects of the Treaty. It was not those aspects that placed the future of Europe at risk. Thus, it was decided that if this terminology posed difficulties to the other States concerning the agreement, we could eventually accept its modification. The final result is an excellent one. If the previous Treaty was said not to be a proper Constitution, the new one will doubtlessly have to be recognized as much more than a Treaty, from a political point of view. It is a project with a foundational character, a Treaty for the new Europe. The new Treaty establishes in a clear way the binding juridical value of the Charter of Fundamental Rights and Duties. This recognition is essential in order to bring into force our shared value system. Besides, the Treaty introduces a substantial advance for the efficient functioning of the European Union. The subjects that may be voted by qualified majority will increase from 36 to 85, which sets a significant limit to the principle of unanimity that slows down or blocks decision-making in Europe so many times. Once it comes into force, the qualified majority will be the regime applicable to other delicate questions for Spain such as immigration, energy and cooperation in the areas of justice and internal affairs. These areas have a great potential inside the European Union and they require a more agile system in order to be developed. Our citizens, the Spanish citizens, will be the first to experience the benefits of these measures. As the Honourable Deputies already know, the definition of the qualified majority voting system has been one of the most discussed questions at this Council. We finally have reached an agreement which consists in keeping the existing system until the 1st of November 2014, with a further transition period until the 31st of March 2017, during which the blocking minorities may constitute themselves either upon the basis of the system in force, the one known as ""Nice system"", or upon the basis of the double majority system, following the decision of the interested States. Both in the case of the existing system and in the case of the double majority system, Spain has an adequate representation, according to its population; but Spain wishes to have a superior influence, as compared to its own number of votes or to what its inhabitants represent, since it knows, by its own experience, that real power in the Union does not depend on more or less votes, but on the capacity of the member States to generate confidence, attract involvement, make alliances and defend its national positions from a European perspective. Against the option of the blocking minorities, the Treaty proposes reinforced cooperation and establishes that these may be promoted by nine States minimum. This is also especially relevant for a country such as Spain, which wants to be at the avant-garde of the integration process in almost all the fields of action of the Union. And there is something more: before the end of October this year, a proposal on the new composition of the European Parliament will have to be put forward, and with regards to this proposal, it guarantees an increase in the number of seats corresponding to Spain during the elections to the Parliament that will be celebrated in 200 As far as the institutional field is concerned, with the creation of the new figures, namely, the President of the Council of the European Union and High Representative for the Common Foreign and Security Policy, Europe will progressively reinforce its efficiency, its visibility and its importance as an authentic European Government. Thanks to these figures it will be easier to identify the personality of the Union and speak on its behalf with a single voice in the international area. It is a very important step in the process of political integration in the European Union, which will give institutional coherence to the functioning of the Council and to the direction and development of the Common Foreign and Security Policy, besides, thanks to the Treaty it will also have an external European service so that it can enter into force. Moreover, the Treaty is a great advance as far as the creation of a Space for Freedom, Security and Justice is concerned, these depend completely on the qualified majority after the introduction in this category of the areas of police and criminal cooperation. These are very good news for Spain and promoting such policies at a European level is a reward to our efforts, and it is also a very significant change for our citizens, as it reinforces the protection of their interests and of their security. With this new framework for actuation, the European policy on immigration promoted by the Spanish Government will be more efficient from the perspective of the European Union. Besides, as far as another question of strategic importance for Spanish interests is concerned, the Treaty makes specific reference to the promotion of energetic interconnections among the member States, which, as the Honourable Deputies know, is an essential landmark for the security and development of our energetic policy. The Union recognizes that the principle of energetic solidarity can not be understood in Europe without the development of interconnections. This means, doubtlessly, a great support for the achievement of such interconnections, which are vital for our energetic system. Spain has also been able to keep, in the new text, the improvements established by the Constitutional Treaty with regards to a question that is rather delicate in the case of our country, that concerning the Statute of Ultra-peripheral Regions. At the same time, the Treaty reinforces the role of the national Parliaments, by increasing their capacity to intervene in the European legislative process whenever a simple majority of the votes attributed to those national Parliaments deems that the project put forward does not respect the principle of subsidiarity. Honourable Deputies, I believe that we can be really satisfied with these results. We have not left out any substantial point of the Constitutional Treaty and we have obtained some positive changes for Spain. As far as Spain, this Council has been a reinforcement of our position in Europe. We have worked in cooperation and in harmony with the German Presidency, and I would like to congratulate them once more, from here, on the success achieved thanks to this agreement; the political determination of the German Presidency has doubtlessly been essential for the command that the European Council has given to the Intergovernmental Conference. We have kept a close contact with France, which is the country with which we presented a common proposal a few hours before the meeting of the European Council. And I can tell you that the coordination of our positions and the common mediation have been very useful for the German Presidency. Similarly, we have been working with Italy, Belgium and Luxembourg in order to defend those parts of the Constitutional Treaty that we considered essential. Spain has acted in favour of stability and agreement. It has generated confidence during the whole negotiation and with this attitude we have been able to impulse the defence of the contents and the ambition of a new Treaty. Portugal, the country that will occupy the European Presidency during the next semester, will have our full support during the Intergovernmental Conference. I am convinced that we will have a new Treaty this same year and that its ratification process will take place without any further difficulties. Honourable Deputies, Even though this negotiation about the new Treaty has been the centre of attention of the debates of the Council, during this Council other conclusions about other matters have also been approved of. As you will see, these matters, which I will briefly refer to next, are also of importance for Spain. The Council went on dealing with European immigration policies, following the proposals of Spain. Thus, it stated the need to develop further on the actions in Africa and in the Mediterranean region, signing new Mobility Agreements with the Countries of origin and with the Countries of passage; it congratulated itself on the achievement of agreements for the creation of quick intervention teams and a network of coastal patrols, and it decided to keep reinforcing the capacity of the European Exterior Frontiers Agency. Besides, the Council reaffirmed the importance of the fact that a good management of legal immigration may contribute to dissuade illegal migration flows, and it developed some aspects of the application of this European policy on immigration in the Eastern and South-eastern frontiers of the Union. As far as economic, social and environmental policies are concerned, the Council paid attention to the progress made and to the projects that are currently being carried out with regards to matters such as joint technological initiatives or the European Institute of Technology; it repeated the importance of moving forward towards a European, efficient and sustainable transport, and it also encouraged the work on coordination of the social security systems and on the application of the Action Plan against AIDS. Finally, the conclusions of the Council also focus on the European neighbourhood policy, the strategy of the European Union for a new association with Central Asia and the dialogue process with the so-called emerging economies. Similarly, the European Council celebrated the fact that Cyprus and Malt are in condition to adopt the euro by next 1st of January 200 Honourable Deputies, These have been the main contents of the European Council that has given us back the image of the Europe we want, the Europe in which we believe and for which we have been working so far: a Europe full of ambition and built upon consensus. Spain and Europe have come out of this process even stronger. We were the first to ratify, by referendum, the Constitutional Treaty. In so doing, we reinforced it so that it could survive in essence against the difficulties. We have now contributed in a decisive way to lay the foundations for the agreement and we have proved our solidarity throughout the negotiation. Spain is perceived at a European level as a member State that transmits stability and confidence, and assumes its responsibilities when Europe requires it. This is how we are perceived, this is how we are needed and this is how we are recognized. It is for this reason that we should feel reasonably satisfied and proud of our contribution and, also, and mainly, because Europe has achieved an agreement that will be applied and it will thus bring about a more democratic, efficient functioning of the Union, which is, no doubt, what most of the Spanish and what most of the European citizens want. Thank you very much.
## 4 President .- Good morning. Thank you for attending this press conference. I hope you all have had time to rest. In the first place, I would like to say that today is a good day for Europe and I am satisfied as we have attained a very important agreement in order to modify in a substantial way the operation of the European Union, in order to make it more efficient so as to provide an answer to the social problems and to the problems of the European citizens. As you know, achieving this agreement was a difficult challenge after the process that we had gone through as a consequence of the referendums in France and in the Netherlands, and we have made it. We all have been willing and we all have committed in order to get the European Union going again, in order to complete a new stage, in order to make it move in the right direction in this new stage, so that it may achieve an each time more perfect, efficient and useful political union. Thus, I would like to express the satisfaction of the Government of Spain, of a Europeist country, a country that has firmly decided to support the European Union, the strengthening of the European Union and its construction, in order -as usual- to establish a compromise, in this case a compromise among twenty seven countries according to the political circumstances that we already know, which I have just mentioned. Everyone has made concessions so that everyone could win a lot. As you all know, the European Council has issued a mandate for the Intergovernmental Conference to reform the basic treaties of the European Union; a mandate whose most important aspects for the operation of the European Union, from the Spanish perspective, are the following: in the first place, the consecration of the rights, of the principles of the Chart of Fundamental Rights with legal value; in the second place, and this might be the most operative achievement, the subjects that will be decided on by qualified majority have passed from 36 to 87, thus, we will reduce the unanimity system and, accordingly, the right of veto, which will facilitate the decision making process with regards to important issues for the whole Union and for Spain, such as, for instance, immigration, energy or justice and interior. I was saying that the European Union would function more democratically with the reform of the Treaty because one of the main principles of our democracies, namely, the weight of the majority, has spread in the heart of Europe, for it could not keep on working according to the principles of Europe when it had six, nine or twelve members. Many of these issues, as I said, are very important for Spain. As you know, the definition of the concept of qualified majority has been one of the most discussed issues, among others, during this European Council. We finally have reached an agreement whereby the voting system in force will be kept, the one known as ""Nice"" system, until 2014, followed by another period, until the 31st of March 2017, during which the minorities will be allowed to use the double majority system or the ""Nice"" system, according to the decision of the States concerned if it is so requested by any other State. Besides, one of the main achievements of the reform, in my opinion, is the new definition of the EU Foreign and Security Policy. Europe is going to have a single, stronger voice in order to carry out its activities in the world, thanks to the High Representative of the Union, who will be Vice President of the Commission and, besides, will be provided with its own service, with a foreign service, in order to carry out his tasks. One of the main objectives of all this reform process has been to endow the European Union with a stronger voice, more efficient and unified as far of foreign policy and security are concerned. Besides, we will have a common, integral policy on immigration upon the bases that we have already established during the last few months, with the active participation of the Government of Spain, as you know. This has been an important step forward in the area of justice, freedom and security for the construction of the European space. Besides, with regards to a matter of strategic interest for Spain, at Spain's own request, an agreement has been adopted in order to introduce a specific reference in the energy policy for the promotion of energetic interconnections among the member States. Similarly, I would like to emphasise a specific matter, for the improvements established in the Constitutional Treaty concerning the Statute of Ultraperipheral Regions are maintained, for, as you know, this is a very interesting matter for Spain. The European Council has issued a limited mandate, very defined and specific, for the Intergovernmental Conference. You know that the objective of the Portuguese Presidency, as expressed yesterday, is to complete the process as soon as possible so that before the end of the year we may have approved of the reform of the Treaty; this new Treaty that will enable the European Union to operate more democratically, efficiently and according to our present times. The German Presidency has played a fundamental role in order to establish this Agreement. It has been supported by Spain in order to achieve the common backing and in order to approach the most distant positions throughout the last few weeks and, of course, the European Council itself has been supported by Spain. Similarly, we have been working intensely with the President of the Republic of France, Mr. Nicolas Sarkozy; with the Prime Minister of Italy, Mr. Romano Prodi, and, of course, we have also collaborated with the Prime Minister of Great Britain, Mr. Tony Blair, with regards to many important aspects; and, by the way, the latter received yesterday, quite logically, an affectionate applause for this was the last time for him to take part in a European Council. I would also like to express my gratitude for the fact that we have been able to set up a relationship and to work with Mr. Tony Blair at the European Council during this period. To sum up, Europe has provided an answer to a difficult situation as the Constitutional Treaty had not been approved of. We have finally included the most important aspects for the practical operation of the European Union in the reform of the Treaty. Thus, the progressively more united, political, efficient Europe that we want, the one with a more powerful voice, with a single voice in the world, will come true once the Treaty is ratified and enters into force. P.- I would like to know whether the Spanish Government has already decided on what it is going to propose to the Spanish citizens with regards to this new Treaty, for Spain ratified the referendum on the European Union back in February 2005: whether it is going to propose a new referendum, whether it is going to be approved of by the Parliament‚Ä¶ How is that process going to be? President .- The ratification process is going to take place at the Parliament. Spanish citizens already gave their opinion about a text that, of course, included an important change in the operation of the Union and most of that text is going to form part of the Treaties of the European Union. Thus, the ratification is going to take place at the Parliament. P .- We all agree that this agreement was necessary because, among other things, we could not provide an answer to a two-year long crisis with an even more serious crisis if we had failed. But you, in particular, who have defended so firmly the Constitutional Treaty that has now been forgotten, don't you have a sour feeling? There are evident achievements, but Spain has had to renounce to many of its demands, during the negotiation and, mainly, during the last moments of this negotiation, Europe has had to give in to Poland. Don't you have a sour feeling, of some type, thinking of what could have been and finally has not been achieved, in spite of what has been achieved? President .- Most certainly not, and even less at dawn, for it was at dawn that we finished the meeting yesterday‚Ä¶ I have a very positive feeling, for things, as you know very well, were very difficult, months ago, one year ago, in order to find a solution for all, which is how we work in Europe. Of course, from the point of view of the practical operation, which was the essential reason of the Constitutional Treaty and the Convention, from the practical point of view, the most important thing is the reform of the Treaties, which we passed yesterday. The fact that many issues will be approved of by qualified majority, the abandonment of unanimity, which blocks out, which hinders common policies, which does not allow the integration of a European action in important areas such as the ones I have just mentioned (immigration, energy and justice or Interior) was our essential objective. The fact that there is a voting formula and other instruments that are each time more democratic, such as the intense role of national Parliaments and the legislative initiative for citizens, all this implies an important change from the democratic point of view and from the point of view of the capacities of the European Union. Whatever will change with this Treaty is going to change for better. Could we have implemented more changes? Yes, but, once more, Europe has remained loyal to its tradition. As the founders foresaw, Europe is moving forward step by step. Yesterday's step was an important one. All the steps towards the construction of the European Union have yielded very positive results for the European Union and for the countries that form part of it. In fact, I think that we will all agree that this political project is admired all over the world and this is a political project whose current destiny we would not have believed only fifteen years ago, if we had been described -once century ago- a Europe formed by Twenty Seven members, after all the difficulties of co-existence among flags and nations, quite surely. Its destiny is democracy, which is essential, unity, peaceful coexistence and prosperity. That is Europe and, to a great extent, thanks to the European Union. The more we have a European Union, and the better the European Union may work, the better, for I am firmly convinced that the horizon of its Twenty Seven members will involve more security, welfare and prosperity. This is a step, an important step in a difficult situation. P .- Nonetheless, the characteristics of the negotiation in the last moment, that is to say, of what we saw yesterday, the very fact that the Polish have been left outside the Intergovernmental Conference so far, doesn't it increase or augment, to a certain extent, the sensation or the impression that this procedure and this Constitution lack legitimacy? My question is whether that sensation of lack of legitimacy might give raise to the demands or petitions for referendums and, thus, it might hinder the whole process once more. President .- Of course that is not the perspective. I think that, quite obviously, the legitimacy issues from the European Law itself and from the way the Treaties are reformed, from the way it has usually been done in most of the occasions in which a Treaty has been approved of, and also from the great political consensus, which is what gives more legitimacy. I am convinced that what European citizens wanted yesterday was an agreement and to clear out the period or the phase of vision, of paralysis and incertitude about the way in which Europe was going to face its future. We have made it and this is very positive. I honestly think that all citizens can perfectly understand that, when we are talking about Twenty Seven countries that form part of the European Union, at present -which represents almost five hundred million citizens, whose countries have very different histories and also a very different pace of incorporation to the European Union, and whose economic development is also very different in each case-, establishing an agreement in spite of all those factors is doubtlessly a great positive achievement, not to say a success. P .- One of the chapters that Poland wanted to include was the one concerning morality. I would like to know where the Spanish Government was going to get in order to impede that Polish petition. Besides, as to your conversation with Mr. Tony Blair, which lasted half an hour, we were told part of that conversation, but I would like to know whether you analysed the current situation of terrorism in Spain and whether Mr. Blair gave any piece of advice with regards to it or what was his analysis of this issue. As to terrorism, I would like to know the new data of the Government about the implementation of an operative base of ETA in Portugal, after the police research that has been carried out during the last few days. President .- As to the first question, it is evident that such proposal did not have the support of the Spanish Government and I can confirm that it was also objected to by most of the Governments of the European Union. Thus, it remained as a declaration strictly on the Polish side, for obvious reasons. In the second place, the conversation with Mr. Tony Blair, logically enough, dealt with the development of the European Council, mainly, and with the most important matters that we had to go through; but in fact, we also talked about terrorism and about ETA's terrorism. Finally, as to the operative data, it is the Ministry of the Interior and, if applicable, the General Director of the Civil Guard, that can facilitate more information in this regard. P .- President, when you became President and arrived to the European Council for the first time, you soon abandoned the defence of the Nice voting system, turning to the double majority system. Yet, it now seems that one of the things that benefits us more is precisely the prolongation of the Nice voting system. Don't you think that you hurried up then or do you think that you are going to be recriminated for it? President .- This is a matter of political positioning and this is a philosophy of the European Union. For Spain, which, in both systems is represented as a 45-million citizen country should be at present, this is a system that works properly. We cannot enter Europe saying, on the one hand that there should not be too many issues approved of unanimously and, at the same time, on the other hand, say that we want as many blocking instruments as possible. This is an utter contradiction. Mine has been a coherent, balanced position. I want decisions concerning most issues to be made by majority and I don't want the logics of blockage to be activated, for that paralyses Europe, and I also want Spain to be represented as it should be. And that was so yesterday and that is so today. And, if I may, from my experience and for the fact that it is an undisputable truth, on most occasions influence does not depend on a difference of one vote, instead, it depends on coherence, on the constructive capacity and on the compromise with Europe. P.- President, as to the Chart of Fundamental Rights, I would like to know the position of Great Britain if it were allowed to carry out the ""opt out"" mentioned. As to terrorism, the newspaper ""Gara"" has published today certain information according to which the Government held a meeting with the terrorist group last March and, besides, it says that you were sent a letter whose tone was not really conciliating last February. Could you confirm such information? President .- As I have said, the Chart includes the legal value that we demanded, I think that this is the main advance with regards to the principles and rights. The position of Great Britain is already known, and I respect it although, logically enough, I do not share it for I think it would be highly convenient for it to include the European Union as a whole. In the second place, obviously enough, I am not acquainted with the speculations concerning such evident propaganda, and I am not going to comment on them or assess them, and even less in the case of such a particular newspaper. P .- President, the new Treaty will confer the European Parliament greater protagonism. Are you satisfied with the representation we have, with the one that has been agreed on? In yesterday's agreement with Poland you mentioned the Eurodeputies, was it because it is also in that same position? President.- We did not talk about Eurodeputies in the agreement with Poland. What we have is what we already had in the Treaty, including a specific reference in the conclusions so that this change in the composition of the European Parliament can be carried out before the elections in 2009, before the next elections to the European Parliament. Of course, if this is so, the composition will benefit Spain. P.- As you have said that you talked about the situation of the terrorist group with the British Prime Minister, I would like to know whether he gave you any new piece of advice, whether he encouraged you to keep going on, for that was what he had told you in the past: he had told you that you should keep up communication, that you should keep up some kind of dialogue. What was his piece of advice in this new situation? President .- During these three long years in the Government, I have spoken to the British Prime Minister on many occasions and we have talked about terrorism and ETA, very specially due to his experience in the peace process in Northern Ireland. Logically enough, he asked me yesterday about it and we commented on it and exchanged our points of view about the situation. Of course, everything he has told me on any occasion has been very useful to me and I am thankful for that. He has always been prone to collaborating. P.- President, it seems to me that in Brussels, the preparation of Brussels has propitiated a new romance, if I may put it so, between Mr. Sarkozy, President of the Republic of France, and the President of the Government of Spain, something that was unthinkable a few months ago. You supported Ms. Segolene Royal during one of your speeches and Mr. Sarkozy supported the policy of the People's Party, criticising quite hardly the process for the massive regularisation of immigrants carried out in Spain, as you will remember. Thus, what is that romance based upon? Is it based on love at the first sight, and I beg your pardon for using this expression? What do you think about the role of Mr. Sarkozy in this first European Council? Was it difficult to deal with a snake charmer who was better than Chirac? And, yet, Mr. Sarkozy seems to have charmed everyone, even taking his shoes off, isn't it right? President .- I am not acquainted with that last detail. I must confirm that I have a very good relationship with Mr. Nicolas Sarkozy, a very good relationship; but this has been the situation from the first day we held the first meeting and now, it has grown more intense, nicer and I think that this is going to be very positive from a political point of view. Besides, I think that we have a good personal understanding, for these things always contribute to it. As you know, we put forward a joint proposal, a proposal by France and Spain, through our Ministers of Foreign Affairs who have been working hard on this question, and it contemplated the main aspects that -in our opinion- had to be included in the reform of the Treaty, the ones that have been included in it, and we have been working in a coordinated way at all times. Yesterday, as you know, the final agreement with Poland was held in the room of the French delegation, and we all were present, Mr. Tony Blair, Mr. Juncker, the President of Poland, Mr. Nicolas Sarkozy and I. That means that there has been a joint, coordinated effort with Mr. Nicolas Sarkozy and, besides, I also think that we should get free from prejudices, sometimes. He has his own political ideas and his own ideology, so do I, but the rest is Europe. That is the grandeur of Europe. Thank you.
## 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Thank you very much, dear Rector, for the kindness and hospitality of the Complutense. Congratulations, Josefina, on your brilliant speech. We are here today, not only because this is the sunniest day of the year, but also because we are fully aware of the fact that climatic change is one of the main challenges for Humanity in this century. Being realistic, this is the greatest risk that life on Earth is facing at the moment. Climatic change is a proven fact, although we are still discussing its consequences and eventual calendar. We can not sit and wait for that date, which has no way back, and we should not resign to its effects. At least we know that it will determine the quality of life of our generation, of our sons' and of our grandsons'. It is an ineluctable responsibility that we have to face on our own and for the sake of the future. Some twenty years ago, or even less, only a few would dare to warn us against what was coming over. But nowadays, the International Community has assumed it. The Intergovernmental Panel of Experts on Climatic Change has put it clearly and sharply in its conclusions; and, even, during the last Summit of the G-8, those countries that had been reluctant for the last few years, as was the case of the United States, have taken the step we all expected and have announced that they are also going to commit themselves with this global task. As on many other occasions, Europe has led an awareness-raising process, a process of international solidarity that has been subscribed by the rest of the developed countries and, as on many other occasions, this awareness-raising process has been led, in the first place, by social organizations and researchers. Europe supported, unanimously, the Kyoto Protocol back in 1997 and now it is Europe that commits itself to making new moves in this process. The European Union will defend more ambitious objectives during the post-Kyoto negotiations and it is considering a reduction of 20 to 30 per cent in the emission of hothouse gases during the upcoming commitment period. Given its geographical situation and its social and economic characteristics, some of which have already been presented - with sufficient reasons for reflection, I believe - by Ms. Josefina Garcia Mendoza, Spain is an exposed country, highly vulnerable to climatic change. The most recent projections of its eventual effects on our country during the 21st century point to a progressive, important thermal increase and to a general decrease of precipitations, unequally distributed over regions and seasons. We can not just accept it passively, we should not remain still. That is why Spain has been involved in the genesis of Kyoto and it is now making great efforts in order to fulfil its compromises. We are going to throw ourselves into this strategy. The Exhibition and the Conference that are taking place today in the framework of the activities of the Year of Science are a good proof of the clear, firm commitment of the Spanish Government and of the Spanish society to promote renewable energies and fight climatic change. The commitment of this Government, I would like to remind you, started out the very first day it entered upon office. Among its first actuations one could point out the creation of the first National Plan to assign the rights for the emission of hothouse gases. Then, the next ones were the preparation of a Governmental strategy concerning mechanisms of flexibility regarding the Kyoto Protocol, with the participation in several initiatives concerning the Carbon Fund; the approval of the Plan on Renewable Energies and of the Action Plan of the Spanish Strategy on Energetic Efficiency; the approval of the Technical Building Code and the preparation of a National Plan for the adaptation to climatic change. Yet, even though we have carried out or we are still carrying out considerable efforts, these are not enough. We must be more ambitious. We have to set up greater aims in order to attain them in shorter periods. We will soon pass the Spanish Strategy on Climatic Change and Clean Energies during a Cabinet meeting that will be exclusively devoted to climatic change. During that meeting we shall approve of a series of specific, urgent measures, with a clear calendar and with available resources, in order to fulfil our commitment with the Kyoto Protocol. As part of the essential part of the Plan of Urgent Measures, we are elaborating a new Saving and Energy Efficiency Action Plan for the period 2008-201 The strategy defines eleven areas of intervention, from institutional cooperation to Research, Development and Technological Innovation, with special attention to the so-called disperse diffuse sectors: transport, residential, commercial, institutional, agricultural and service sectors. Thus, as to the transport sector, we can point out the elaboration of a basic rule on sustainable mobility and the promotion of railway transport for the transportation of goods. As to the residential sector, we can point out the energetic improvement of buildings and the spread of the energetic label to all the domestic facilities. Regarding the institutional sector, we have to point out the establishment of energetic efficiency requisites in the case of public lighting. There are nearly 170 specific measures in the General Strategy against climatic change and in favour of clean, renewable energies. The Strategy will also serve to orientate the capacity of Spain to assume additional compromises in the fight against climatic change after 201 The answer to climatic change is not just a governmental matter; the Government must lead it, and we accept it as it is, but it is a matter that depends on all the society. It concerns all the Administrations, the companies, the brilliant companies belonging to this sector in our country, the consumers and the civil society in general. It implies political leadership, a cultural change and social responsibility. The effort must be a collective, shared one. Each one, each company and each Administration must adapt its own dynamics to these new commitments and the achievements will also be shared. In 2006 we managed to revert a historical tendency and Spanish society reduced the demand for primary energy in 3 per cent, in spite of the high economic increase. Besides, this has allowed us to reduce the emissions of hothouse gases by, approximately, 4 per cent. And all this has been compatible with a strong, stable economic growth. The Spanish society, the companies and the citizens have proved that the fight against climatic change is compatible with economic growth. I dare say it is the best way towards economic growth that we have in front of us nowadays. The Spanish can feel proud of the work that is being carried out as far as renewable energies are concerned. We had a certain potential as a country and we know how to make the most out of it. Sun, water and wind are nothing but potential resources if we do not turn them into a source of useful energy. This is what is being achieved by means of research and innovation. Thanks to our research centres, as is the case of the researchers I have met today at the Complutense, and thanks to our companies, we have become a leading country - I would like to emphasize this - in most renewable technologies. Thus, for example, and since this Day is specially devoted to the sun, which, by the way, has behaved, we should say that Spain is the first country in the world where a solar thermal plant of high commercial temperature has come into operation. This is partly due to the work carried out in the research on this type of energy at the Solar Platform of Almeria. But our contribution to renewable energies is not just that: we are the third country in the world in the manufacture of aerogenerators and our market share last year was superior to 20 per cent; we are the leaders in biofuel production; in 2006, Spain was the second producer of bioethanol in the European Union and we were also the second producer of photovoltaic solar energy, as far as installed power is concerned, with an increase of 300 per cent as compared to year 200 The sources of renewable energy cover now an important part of the energetic demand. More of 20 per cent of the electric demand in 2006 was covered with this type of energy. Wind energy alone achieved 9 per cent of the total electric production in our country. Thus, Spain has taken huge steps in very little time. This is a fact we should congratulate ourselves on, but we must be fair and recognize each one's efforts. We are now in an appropriate moment in order to thank our companies for their work and to recognize their contribution to renewable energies and to sustainable development. Some of those companies are represented here. I must thank you for your work. You have been able to explore our technology and compete at a worldwide level, you are now present in the five continents, you have generated employment, more than 18000 work on renewable energies in Spain and you have promoted the image of Spain as a country with technological capacity and respectful with the environment, committed with sustainable development and aware of the challenges of the future. The representatives of non-governmental environmental organisations are also here. Thanks to their pioneer work and to their resolution and steadiness, we all have become aware of the importance of the defence of environmental values. Thanks to their tenacity, the protection of the environment is part of everyday life. From here, I encourage you to persevere on this determination and to keep presenting society and the Governments with objectives that seem unattainable today, yet will soon be demanded by society in general. I would like to finish by repeating that the fight against climatic change is an essential matter for the Government, an absolute priority, the great question of the future, for our economic model and for our growth model. We are doing what we are doing at the moment in order to progress today, but also with the aim of ensuring the future. The fight against climatic change must be the axis of any society-building project during the next years and during the next decades. And what's more, it must be assumed as an individual commitment. It must be more present in our conscience and form part of our daily customs. It is a great objective for any country, it stimulates innovation, it stimulates a healthy way of life, it stimulates respect for our heritage and it stimulates the passion to respect what we will leave for those who will come after us. From the Government, the fight against climatic change has characterised, to a great extent, the legislature; but the efforts we have made during these years must not come to an end once the legislature is over. The fight against climatic change is an essential part of our project. It must be an essential objective of Spanish society and conferences such as the one that is taking place today contribute to the spread of the importance of renewable energies as a source of future and as a fundamental element in order to ensure sustainable growth, in order to fight climatic change and in order to gain an insight into the Earth, into the landscape, into our resources and into what being able to develop welfare and to respect our environment represents. This will not be the last time for the Government to coordinate an initiative of this nature. The experience is extraordinarily positive. This has been one of the occasions on which we have been able to bring together the efforts made by different sectors of society. This matter deserves it and requires it. The fight against climatic change must consist of many voices working up one powerful, single message: defending what belongs to all of us so that it keeps belonging to us all. I want my voice to join yours, to join the voice of society, the voice of the non-governmental organisations, the voice of researchers and the voice of the companies in favour of a common commitment: the commitment of Spain to be the leader in the fight against climatic change and also the leader in favour of renewable energies. Thank you for your participation and keep working. Thank you very much.
## 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Nicolas, eighty? No, I can't believe that. I have seen you, I have seen you while you were coming up here and I have seen you before‚Ä¶ I can't believe it. Do you know what happens? The thing is that in the case of those who give their lives for others, life is twice as worthy; it is twice as worthy. For me, Nicolas is forty. Apply this rule of thumb to yourselves, for that's a good one, because many of us here are trying to devote part of our lives to the destiny of others. I was thinking of that a while ago, while I was sitting there, next to Nicolas: if I apply this rule of thumb to Nicolas and if I apply it to myself: that makes twenty three. Not bad. Well, I don't know whether some others in the Spanish political arena would like to be applied this rule, but just do it. Nicolas, I wanted to be here, and I wanted to, mainly, because I wanted to enjoy it. It is true that such events, which are so emotive, are always somewhat nostalgic; nostalgia is quite habitual in a nation such as the Spanish nation, a nation whose history during the 19th century and part of the 20th has been difficult, with few satisfactions. And this makes us remember, quite nostalgically, the moments in which the doors of freedom opened up. I remember that with a deep happiness, with enthusiasm. I am deeply satisfied for having the chance of being the President of the Government of Spain in 200 21st century Spain does not need to admire the others, other countries, as used to happen during the 19th and during the 20th centuries. 21st century Spain can admire itself and 21st century Spain is admired by many countries in Europe and in the world. This has been thanks to people like Nicolas. Blanco, Urbieta, Terreros, a complete saga: the Redondo saga. Socialists, members of the General Workers' Union, defenders of freedom, committed, with strong convictions -it is not easy to convince them as you know--, they have proved, during this time, what is worth the effort in life, they have proved that it is worth it to commit oneself, to defend a position, to believe in one's country and in one's ideas. They have done this on many occasions in silence. I think I quite know Nicolas and I can say now that he is not really fond of tributes, yet, he is a loving man. This is the meaning, for me, of this tribute in this House of People; a House of People whose origin, whose principles embody the two most important values that the socialist movement, of the General Workers' Union (UGT) and the Socialist Party have given to this country; the two values that, in fact, transform, create, generate progress: that is culture and freedom. Once more, it is in the House of People, paying a tribute to someone who has been the General Secretary of the General Workers' Union for eighteen years - and let me praise all those in our group, in the General Workers' Union, in the Free Teaching Institution (Institucion Libre de Ensenanza) and in the Houses of People - that education has been turned into the main bastion of our evolution as a party and as a union. Thank you very much to you all. Nicolas has witnessed and he has also been the protagonist of the last three most brilliant decades of modern and contemporary history, and he has also been the protagonist of some of the most essential changes that our country needed and that it managed to achieve: namely, political and syndical freedom. He was there when the Constitution was written, for he was a constituent deputy as we said in the Parliament the day before yesterday; and he was there in the victory of 1982 and he left the Parliament when the General Workers' Union and the Spanish Socialist Workers Party made the wise decision of giving way to the necessary crisis in order to assume their positions with maturity. And, as usual in any maturity crisis, maturity crises and entering maturity itself is not usually calm or peaceful. That is why we also went through such moments‚Ä¶ It is true that I saw it with a perspective and I remember it very well, of course, for I already had responsibilities‚Ä¶ I was now commenting on the general strike of the 14th of December 1988 with Candido, for it was a situation that expressed very well the meaning of the Socialist Party and of the General Workers' Union in Spain. I remember that I was in my organisation, the Organisation of Leon, and the members were quite happy, preparing the placards that were going to be taken out during the demonstration for the general strike next day. They were members of the party, most of them workers of the railway company, by the way; for as you know there is a long tradition among those workers. We went through this crisis, which bordered schizophrenia, it is true, but it was necessary, absolutely necessary. Historically, as a result of the dictatorship, the General Workers' Union and the Spanish Socialist Workers' Party were the same. In a democratic society they could not be the same, even though they might share values and objectives. We started out together, then we fell apart and then, as it usually happens even with the laws of physics, we went back to our corresponding position, and that is where we are now. And that has also been thanks to our General Secretary, Candido, of whom you can be proud, Nicolas, because you left the General Workers' Union in very good hands. It is true that this week has been a week of memories with the thirty years of the first democratic elections. There has been a brilliant institutional celebration in order to remember those who are still standing, as strong as ever, those who were also present in those first elections. But today is a good day for me -as President of the Government of Spain- to state here, in a House of the People, before all citizens, that the transition, that freedom and democracy would not have been possible without the wonderful example of the workers and of the unions of Spain. I would like this to remain in the collective memory of the last thirty years. I would like to point out that we have reasons to admire ourselves as a country and to be admired by many countries in Europe and all over the world. An example of this is the way in which the social dialogue and the social consensus are structured, and an example of this are the emotive words of someone who has been the president of the representatives of the businessmen for many years, Mr. Jose Maria Cuevas. I know that he is really convinced about what he said here about Nicolas, about the General Workers' Union, about the Workers' Commissions and about the Spanish unions, which have made a great contribution to modernisation, to progress and to welfare in this country. Thank you, Jose Maria. I am glad that this is also the pervading atmosphere in the case of the understanding or of the unity of syndical action between the General Workers' Union and the Workers' Commissions, because the words that Jose Maria has uttered here today are invaluable for me. He has been generous with the General Workers' Union, the main competitor in the syndical arena. This takes Jose Maria Fidalgo even higher, which is quite a difficult task. Thus, let's call things by their names: we have done it very well, we are doing it very well and its results will benefit the Spanish citizens and Spain, the Spain that Nicolas Redondo loves so much. What called our attention in the video was the fact that the history of the Spanish Socialist Workers' Party and the General Workers' Union melted together with the meaning of modern and contemporary history in Spain. Let's consider this piece of data: the Spanish Socialist Workers' Party was founded in Madrid; the General Workers' Union in Catalonia and we all know that the Basque Country was decisive for the growth of both the General Workers' Union and the Socialist Party, as the Redondo's know very well. This is our sign of identity: the party that resembles Spain more, the party that has structured and still structures the meaning of a common project, the one with the deepest historical roots and the one with an even better future. Nicolas, your forty years place in front of us the perspective of what should be emphasised here today. From those well-written words, namely, history, memory and future, I chose the last one, the future, because we are going to witness a near future of full employment in Spain; we are going to witness a future with full equality among men and women as far as the activity rates are concerned, as far as rights are concerned, as far as employment is concerned and as far as the management of important companies in our country is concerned; we are going to witness a near future in which we will provide not only for education, health care and, of course, for a pension system that we will progressively approach to the model of the European average values, but also one in which we will provide for those who are alone, for dependent persons and for their families. A future in which we must guarantee a worthier Minimum Salary. We have walked a long way during this Legislature, and we will walk an even longer one during the next Legislature. The future of a country, think of thirty years before, where there were still many emigrants, a country that knows that it must keep being an example of organisation for those who come from abroad to live and work with us; persons who are going to work with their rights and with their duties if they are to stay here working, because in this country, regardless of the origin of the person, we are not going to allow illegal, fraudulent work, we are not going to allow the exploitation of a human being, regardless of the colour of his skin. A future with social agreements, with social dialogue, as we have been doing during the last three years with twenty social agreements. And a future that must focus on employment, on two main objectives: keeping on increasing at a swifter pace the transformation of temporary employment into indefinite employment, which is functioning very well thanks to the agreement that we have signed; and, of course, winning the battle of health and accidents at work, for which we want to approve of a long-scope strategy so as to reduce accidents at work in Spain in 25 per cent. Our unions use the word productivity, they attest modernity and they know that for our country to have more prosperity, welfare, social policies, equality and rights we have to produce more and better every day. This involves education, research and innovation. We can make it and we are going to make it. Nicolas, you may be proud, but the way a socialist does: intimately proud. Surely enough, words of praise, words of recognition and tributes come out relatively easy, they are even obligatory. I know that you are proud of yourself. I know that you have proved that living, committing with the destinies of the others and committing with deep values is worth it. You belong to a generation like the ones that have come next, a generation of Spanish citizens that have risen to the occasion. You have left us a country, Spain, for which it is worth it to fight; a country, Spain, that is going to keep on progressing every day; a country, Spain, that is admired, respected; a country, Spain, whose sole signs of identity before the world are democracy, justice, equality and solidarity, and, of course, peace. Nicolas, cheers for the General Workers' Union! cheers for workers! And cheers for the Redondo's! Thank you very much.</code></pre>
<p>The data contain speeches by four different politicians, each of whom are positioned at different points on a liberal-conservative scale.</p>
<p>We can then calculate the Flesch-Kincaid readability/complexity score with the <code>quanteda.textstats</code> package like so.</p>
<div class="sourceCode" id="cb405"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">speeches</span><span class="op">$</span><span class="va">flesch.kincaid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_readability.html">textstat_readability</a></span><span class="op">(</span><span class="va">speeches</span><span class="op">$</span><span class="va">text</span>, measure <span class="op">=</span> <span class="st">"Flesch.Kincaid"</span><span class="op">)</span>

<span class="co"># returned as quanteda data.frame with document-level information;</span>
<span class="co"># need just the score:</span>
<span class="va">speeches</span><span class="op">$</span><span class="va">flesch.kincaid</span> <span class="op">&lt;-</span> <span class="va">speeches</span><span class="op">$</span><span class="va">flesch.kincaid</span><span class="op">$</span><span class="va">Flesch.Kincaid</span></code></pre></div>
<p>We want this information aggregated over each of our politicians: Gordon Brown, Jose Zapatero‚Äù, David Cameron, and Mariano Rajoy. These are recorded in the data under a column called ‚Äúspeaker.‚Äù</p>
<div class="sourceCode" id="cb406"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#get mean and standard deviation of Flesch-Kincaid, and N of speeches for each speaker</span>
<span class="va">sum_corpus</span> <span class="op">&lt;-</span> <span class="va">speeches</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">speaker</span><span class="op">)</span> <span class="op"><a href="https://quanteda.io/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">flesch.kincaid</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,
                   SD<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">flesch.kincaid</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,
                   N<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">speaker</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## group_by: one grouping variable (speaker)</code></pre>
<pre><code>## summarise: now 4 rows and 4 columns, ungrouped</code></pre>
<div class="sourceCode" id="cb409"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># calculate standard errors and confidence intervals</span>
<span class="va">sum_corpus</span><span class="op">$</span><span class="va">se</span> <span class="op">&lt;-</span> <span class="va">sum_corpus</span><span class="op">$</span><span class="va">SD</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">sum_corpus</span><span class="op">$</span><span class="va">N</span><span class="op">)</span>
<span class="va">sum_corpus</span><span class="op">$</span><span class="va">min</span> <span class="op">&lt;-</span> <span class="va">sum_corpus</span><span class="op">$</span><span class="va">mean</span> <span class="op">-</span> <span class="fl">1.96</span><span class="op">*</span><span class="va">sum_corpus</span><span class="op">$</span><span class="va">se</span>
<span class="va">sum_corpus</span><span class="op">$</span><span class="va">max</span> <span class="op">&lt;-</span> <span class="va">sum_corpus</span><span class="op">$</span><span class="va">mean</span> <span class="op">+</span> <span class="fl">1.96</span><span class="op">*</span><span class="va">sum_corpus</span><span class="op">$</span><span class="va">se</span></code></pre></div>
<p>And this gives us data in tidy format that looks like so.</p>
<div class="sourceCode" id="cb410"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_corpus</span></code></pre></div>
<pre><code>## # A tibble: 4 √ó 7
##   speaker          mean    SD     N     se   min   max
##   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 D. Cameron       10.8  1.71   456 0.0799  10.7  11.0
## 2 G. Brown         13.3  2.30   277 0.138   13.0  13.6
## 3 J.L.R. Zapatero  15.5  2.83   354 0.150   15.2  15.8
## 4 M. Rajoy         13.7  2.56   389 0.130   13.4  13.9</code></pre>
<p>Which we can then plot‚Äîand we see that our results look like those in Figure 1 of the published article by <span class="citation">Schoonvelde et al. (<a href="references-2.html#ref-schoonvelde_liberals_2019" role="doc-biblioref">2019</a>)</span>.</p>
<div class="sourceCode" id="cb412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">sum_corpus</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">speaker</span>, y<span class="op">=</span><span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span>ymin<span class="op">=</span><span class="va">sum_corpus</span><span class="op">$</span><span class="va">min</span>,ymax<span class="op">=</span><span class="va">sum_corpus</span><span class="op">$</span><span class="va">max</span>, width<span class="op">=</span><span class="fl">.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Mean Complexity"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-158-1.png" width="672"></div>
</div>
<div id="exercises-2" class="section level2" number="19.7">
<h2>
<span class="header-section-number">19.7</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-2"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Compute distance measures such as ‚Äúeuclidean‚Äù or ‚Äúmanhattan‚Äù for the MP tweets as above, comparing between tweets by MPs and tweets by PM, Theresa May.</li>
<li>Estimate at least three other complexity measures for the EU speeches as above. Consider how the results compare to the Flesch-Kincaid measure used in the article by <span class="citation">Schoonvelde et al. (<a href="references-2.html#ref-schoonvelde_liberals_2019" role="doc-biblioref">2019</a>)</span>.</li>
<li>(Advanced‚Äîoptional) Estimate similarity scores between the MP tweets and the PM tweets for each week contained in the data. Plot the results.</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="exercise-2-dictionary-based-methods.html"><span class="header-section-number">18</span> Exercise 2: Dictionary-based methods</a></div>
<div class="next"><a href="exercise-4-scaling-techniques.html"><span class="header-section-number">20</span> Exercise 4: Scaling techniques</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#exercise-3-comparison-and-complexity"><span class="header-section-number">19</span> Exercise 3: Comparison and complexity</a></li>
<li><a class="nav-link" href="#introduction-2"><span class="header-section-number">19.1</span> Introduction</a></li>
<li><a class="nav-link" href="#setup-8"><span class="header-section-number">19.2</span> Setup</a></li>
<li><a class="nav-link" href="#generate-document-feature-matrix"><span class="header-section-number">19.3</span> Generate document feature matrix</a></li>
<li><a class="nav-link" href="#compare-between-mps"><span class="header-section-number">19.4</span> Compare between MPs</a></li>
<li><a class="nav-link" href="#compare-between-measures"><span class="header-section-number">19.5</span> Compare between measures</a></li>
<li><a class="nav-link" href="#complexity-1"><span class="header-section-number">19.6</span> Complexity</a></li>
<li><a class="nav-link" href="#exercises-2"><span class="header-section-number">19.7</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/cjbarrie/CTA-ED/blob/master/13-comparison-and-complexity.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/cjbarrie/CTA-ED/edit/master/13-comparison-and-complexity.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Computational Text Analysis</strong>" was written by Christopher Barrie. It was last built on 2022-05-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
